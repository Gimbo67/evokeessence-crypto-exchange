import{h as x,J as y,r as l,u as j,d as C,i as f,j as e,C as v,N as w,O as g,e as E,B as d,ay as S,Z as D}from"./index-DzUQlMCL.js";import{E as N}from"./layout-D-IzPikD.js";import"./settings-C3McDjct.js";import"./log-out-DkZZLLuv.js";import"./file-text-xMDIOZi1.js";function z(){const{toast:o}=x(),m=y(),[k,p]=l.useState(null),[s,c]=l.useState("");j();const{data:a}=C({queryKey:["employee-documents"],queryFn:async()=>{const t=await fetch("/api/employee/documents");if(!t.ok)throw new Error("Failed to fetch documents");return t.json()}}),i=f({mutationFn:async({documentId:t,status:r,comment:h})=>{const n=await fetch(`/api/kyc/documents/${t}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:r,comment:h})});if(!n.ok){const u=await n.text();throw console.error("Status update error:",u),new Error(u)}return n.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["employee-documents"]}),o({title:"Success",description:"Document status updated successfully"}),p(null),c("")},onError:t=>{o({title:"Error",description:t.message,variant:"destructive"})}});return e.jsx(N,{children:e.jsxs("div",{className:"container py-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Document Review"}),e.jsx("div",{className:"grid gap-6",children:a==null?void 0:a.map(t=>e.jsxs(v,{children:[e.jsx(w,{children:e.jsxs(g,{children:["Document #",t.id]})}),e.jsx(E,{children:e.jsxs("div",{children:[e.jsxs("p",{children:["Status: ",t.status]}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{size:"sm",variant:"default",onClick:()=>i.mutate({documentId:t.id,status:"approved",comment:s}),children:[e.jsx(S,{className:"h-4 w-4 mr-1"})," Approve"]}),e.jsxs(d,{size:"sm",variant:"destructive",onClick:()=>i.mutate({documentId:t.id,status:"rejected",comment:s}),children:[e.jsx(D,{className:"h-4 w-4 mr-1"})," Decline"]}),e.jsx("textarea",{placeholder:"Add comment...",value:s,onChange:r=>c(r.target.value),className:"mt-2 w-full"})]})]})})]},t.id))})]})})}export{z as default};
