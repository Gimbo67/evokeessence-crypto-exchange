import{b,d as C,j as e,B as u,a5 as p,f as t,a6 as f,a7 as y,a8 as v,a9 as N,aa as g,C as T,N as A,O as w,Q as S,e as _,ak as D}from"./index-DzUQlMCL.js";import{T as x,a as m,b as d,c as r,d as o,e as n}from"./table-CxCbk9gb.js";import{E}from"./layout-D-IzPikD.js";import"./settings-C3McDjct.js";import"./log-out-DkZZLLuv.js";import"./file-text-xMDIOZi1.js";function z(){const l=b(),{data:c=[],isLoading:h}=C({queryKey:["/api/employee/transactions"],queryFn:async()=>{try{const s=await D.get("/api/employee/transactions",{withCredentials:!0});return console.log("Employee transactions:",s.data),s.data.map(i=>({...i,amount:typeof i.amount=="number"?i.amount:parseFloat(i.amount||"0"),initialAmount:i.initialAmount||i.amount||0,commissionAmount:i.commissionAmount||0,totalAmount:i.totalAmount||i.amount||0,reference:i.reference||i.id}))}catch(s){throw console.error("Error fetching employee transactions:",s),s}}}),j=c.reduce((s,i)=>(s[i.user.id]||(s[i.user.id]={...i.user,transactionCount:0,totalVolume:0}),s[i.user.id].transactionCount++,s[i.user.id].totalVolume+=i.amount,s),{}),a=(s,i)=>i==="USDC"||i==="USDT"?`${s.toFixed(2)} ${i}`:new Intl.NumberFormat("en-US",{style:"currency",currency:i||"EUR",minimumFractionDigits:2}).format(s);return l("dashboard_clients"),x,m,d,r,l("username"),r,l("email"),r,l("balance"),r,l("actions"),o,Object.values(j).map(s=>e.jsxs(d,{children:[e.jsx(n,{children:s.username}),e.jsx(n,{children:s.email}),e.jsx(n,{children:s.balance}),e.jsx(n,{children:e.jsx(u,{variant:"outline",asChild:!0,children:e.jsx(p,{href:`/employee/clients/${s.id}`,children:l("view_details")})})})]},s.id)),l("transactions"),x,m,d,r,l("type"),r,l("amount"),r,l("reference"),r,l("client"),r,l("status"),r,l("date"),o,h?(d,n,l("loading")):c.length===0?(d,n,l("no_transactions_found")):c.map(s=>e.jsxs(d,{children:[e.jsx(n,{children:e.jsx(t,{variant:"outline",children:s.type})}),e.jsx(n,{children:e.jsx(f,{children:e.jsxs(y,{children:[e.jsx(v,{asChild:!0,children:e.jsxs("div",{className:"flex items-center",children:[a(s.amount,s.currency),e.jsx(N,{className:"h-3 w-3 ml-1 text-muted-foreground"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{children:["Initial: ",a(s.initialAmount||s.amount,s.currency)]}),e.jsxs("div",{children:["Commission: ",a(s.commissionAmount||0,s.currency)]}),e.jsxs("div",{children:["Total: ",a(s.totalAmount||s.amount,s.currency)]})]})})]})})}),e.jsx(n,{children:s.reference?e.jsx("span",{className:"text-sm font-mono",children:s.reference}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.user.username}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.user.email})]})}),e.jsx(n,{children:e.jsx(t,{variant:s.status==="successful"||s.status==="completed"?"default":s.status==="failed"||s.status==="rejected"?"destructive":"secondary",children:s.status})}),e.jsx(n,{children:new Date(s.createdAt).toLocaleDateString()})]},s.id)),e.jsx(E,{children:e.jsxs("div",{className:"container py-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:l("finance_dashboard")}),e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsx(w,{children:l("transactions")}),e.jsx(S,{children:l("manage_transactions")||"View and manage all transactions"})]}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:l("dashboard_clients")||"Clients"}),e.jsxs(x,{children:[e.jsx(m,{children:e.jsxs(d,{children:[e.jsx(r,{children:l("username")}),e.jsx(r,{children:l("email")}),e.jsx(r,{children:l("balance")}),e.jsx(r,{children:l("actions")})]})}),e.jsx(o,{children:Object.values(j).map(s=>e.jsxs(d,{children:[e.jsx(n,{children:s.username}),e.jsx(n,{children:s.email}),e.jsx(n,{children:s.balance}),e.jsx(n,{children:e.jsx(u,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(p,{href:`/employee/clients/${s.id}`,children:l("view_details")})})})]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:l("transactions")||"Transactions"}),e.jsxs(x,{children:[e.jsx(m,{children:e.jsxs(d,{children:[e.jsx(r,{children:l("type")}),e.jsx(r,{children:l("amount")}),e.jsx(r,{children:l("reference")}),e.jsx(r,{children:l("client")}),e.jsx(r,{children:l("status")}),e.jsx(r,{children:l("date")})]})}),e.jsx(o,{children:h?e.jsx(d,{children:e.jsxs(n,{colSpan:6,className:"text-center",children:[l("loading"),"..."]})}):c.length===0?e.jsx(d,{children:e.jsx(n,{colSpan:6,className:"text-center",children:l("no_transactions_found")})}):c.map(s=>e.jsxs(d,{children:[e.jsx(n,{children:e.jsx(t,{variant:"outline",children:s.type})}),e.jsx(n,{children:e.jsx(f,{children:e.jsxs(y,{children:[e.jsx(v,{asChild:!0,children:e.jsxs("div",{className:"flex items-center",children:[a(s.amount,s.currency),e.jsx(N,{className:"h-3 w-3 ml-1 text-muted-foreground"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{children:["Initial: ",a(s.initialAmount||s.amount,s.currency)]}),e.jsxs("div",{children:["Commission: ",a(s.commissionAmount||0,s.currency)]}),e.jsxs("div",{children:["Total: ",a(s.totalAmount||s.amount,s.currency)]})]})})]})})}),e.jsx(n,{children:s.reference?e.jsx("span",{className:"text-sm font-mono",children:s.reference}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.user.username}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.user.email})]})}),e.jsx(n,{children:e.jsx(t,{variant:s.status==="successful"||s.status==="completed"?"default":s.status==="failed"||s.status==="rejected"?"destructive":"secondary",children:s.status})}),e.jsx(n,{children:new Date(s.createdAt).toLocaleDateString()})]},s.id))})]})]})]})})]})]})})}export{z as default};
