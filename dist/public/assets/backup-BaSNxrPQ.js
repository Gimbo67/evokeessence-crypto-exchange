import{c as $,J as De,r as ue,d as V,i as P,a2 as se,j as e,B as i,K as O,U as He,V as Ue,W as C,X as B,ax as j,L as f,M as D,C as o,N as m,O as x,Q as h,e as u,ay as _,az as F,f as S,a0 as je,ab as J,I as d,z as Ke,A as Ge,D as Oe,E as Qe,F as ae,aA as $e,aB as We,aC as _e,aD as Je,aE as p,aF as Xe,ak as v}from"./index-DzUQlMCL.js";import{T as A,a as z,b as g,c as l,d as q,e as r}from"./table-CxCbk9gb.js";import{C as Q}from"./checkbox-DMV5nDXs.js";import{S as T}from"./switch-Dhi0KNo9.js";import{D as Ze}from"./database-B90c4x7u.js";import{H as Ye}from"./hard-drive-nPyOXBYa.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=$("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=$("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=$("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=$("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=$("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);j.object({enabled:j.boolean(),recipients:j.string().min(5,"At least one valid email is required"),smtpServer:j.string().min(1,"SMTP server is required"),smtpPort:j.string().min(1,"SMTP port is required"),smtpUser:j.string().optional(),smtpPassword:j.string().optional(),fromAddress:j.string().email("From address must be a valid email")});j.object({name:j.string().min(1,"Name is required"),enabled:j.boolean(),cronExpression:j.string().min(1,"Cron expression is required")});j.object({name:j.string().min(1,"Name is required"),hostname:j.string().min(1,"Hostname is required"),directory:j.string().min(1,"Backup directory is required"),user:j.string().min(1,"SSH user is required"),keyPath:j.string().min(1,"SSH key path is required"),port:j.string().default("22")});function ms(){var oe,me,xe;const R=De(),[H,fe]=ue.useState("overview"),[M,U]=ue.useState("backup"),{data:n,isLoading:X,error:ge,refetch:Ne}=V({queryKey:["backup","status"],queryFn:async()=>(await v.get("/api/admin/backup/status")).data}),{data:K,isLoading:ve,error:be,refetch:ie}=V({queryKey:["backup","logs",M],queryFn:async()=>(await v.get(`/api/admin/backup/logs?type=${M}`)).data}),{data:t,isLoading:le,error:ls,refetch:ye}=V({queryKey:["backup","notifications"],queryFn:async()=>(await v.get("/api/admin/backup/notifications")).data.config,enabled:H==="notifications"}),{data:Z,isLoading:ke,error:we,refetch:Se}=V({queryKey:["backup","schedule"],queryFn:async()=>(await v.get("/api/admin/backup/schedule")).data.schedules,enabled:H==="schedule"}),{data:N,isLoading:re,error:Ce,refetch:Be}=V({queryKey:["backup","geo-replication"],queryFn:async()=>(await v.get("/api/admin/backup/geo-replication")).data.geoReplication,enabled:H==="geo-replication"}),{data:ne,isLoading:Fe,error:Te,refetch:te}=V({queryKey:["backup","storage-analysis"],queryFn:async()=>(await v.get("/api/admin/backup/storage-analysis")).data.data,enabled:H==="storage"}),k=P({mutationFn:async s=>await v.post("/api/admin/backup/trigger",{type:s}),onSuccess:()=>{p({title:"Backup Initiated",description:"The backup process has been started successfully.",variant:"default"}),R.invalidateQueries({queryKey:["backup","status"]})},onError:s=>{p({title:"Backup Failed",description:"Failed to start the backup process.",variant:"destructive"})}}),L=P({mutationFn:async s=>await v.post("/api/admin/backup/verify",{level:s}),onSuccess:()=>{p({title:"Verification Initiated",description:"The backup verification process has been started.",variant:"default"}),R.invalidateQueries({queryKey:["backup","status"]})},onError:s=>{p({title:"Verification Failed",description:"Failed to start the verification process.",variant:"destructive"})}}),Y=P({mutationFn:async s=>await v.post("/api/admin/backup/cloud",s),onSuccess:()=>{p({title:"Cloud Backup Initiated",description:"The cloud backup process has been started.",variant:"default"}),R.invalidateQueries({queryKey:["backup","status"]})},onError:s=>{p({title:"Cloud Backup Failed",description:"Failed to start the cloud backup process.",variant:"destructive"})}}),E=P({mutationFn:async s=>await v.post("/api/admin/backup/notifications",s),onSuccess:()=>{p({title:"Notification Settings Updated",description:"The notification settings have been updated successfully.",variant:"default"}),R.invalidateQueries({queryKey:["backup","notifications"]})},onError:s=>{p({title:"Update Failed",description:"Failed to update notification settings.",variant:"destructive"})}}),Me=P({mutationFn:async s=>await v.post("/api/admin/backup/schedule",s),onSuccess:()=>{p({title:"Schedule Updated",description:"The backup schedule has been updated successfully.",variant:"default"}),R.invalidateQueries({queryKey:["backup","schedule"]})},onError:s=>{p({title:"Update Failed",description:"Failed to update backup schedule.",variant:"destructive"})}}),w=P({mutationFn:async s=>await v.post("/api/admin/backup/geo-replication",s),onSuccess:()=>{p({title:"Geo-Replication Updated",description:"The geo-replication settings have been updated successfully.",variant:"default"}),R.invalidateQueries({queryKey:["backup","geo-replication"]})},onError:s=>{p({title:"Update Failed",description:"Failed to update geo-replication settings.",variant:"destructive"})}}),G=P({mutationFn:async s=>await v.post("/api/admin/backup/test-server",{name:s}),onSuccess:s=>{var a;p({title:"Server Test Successful",description:((a=s.data)==null?void 0:a.message)||"Successfully connected to the remote server.",variant:"default"})},onError:s=>{p({title:"Server Test Failed",description:"Failed to connect to the remote server.",variant:"destructive"})}}),ce=se({defaultValues:{enabled:((oe=t==null?void 0:t.email)==null?void 0:oe.enabled)||!1,recipients:((xe=(me=t==null?void 0:t.email)==null?void 0:me.recipients)==null?void 0:xe.join(", "))||"",smtpServer:"",smtpPort:"587",smtpUser:"",smtpPassword:"",fromAddress:"backup-system@example.com"}}),Le=se({defaultValues:{name:"",enabled:!0,cronExpression:"0 1 * * *"}}),de=se({defaultValues:{name:"",hostname:"",directory:"/app/backups",user:"backup",keyPath:"",port:"22"}}),W=s=>{if(!s)return"bg-gray-500";switch(s.toLowerCase()){case"operational":case"connected":case"success":return"bg-green-500";case"warning":case"pending":return"bg-yellow-500";case"error":case"failed":case"disconnected":return"bg-red-500";default:return"bg-gray-500"}},ee=s=>{fe(s),s==="logs"?ie():s==="notifications"?ye():s==="schedule"?Se():s==="geo-replication"?Be():s==="storage"&&te()},y=s=>{if(!s)return"N/A";try{return new Date(s).toLocaleString()}catch{return s}},Pe=()=>{if(X)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(f,{className:"mr-2 h-8 w-8 animate-spin"}),e.jsx("span",{children:"Loading backup status..."})]});if(ge)return e.jsxs("div",{className:"flex items-center justify-center p-8 text-red-500",children:[e.jsx(D,{className:"mr-2 h-8 w-8"}),e.jsx("span",{children:"Error loading backup status. Please try again."})]});if(!n||!n.statistics)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(D,{className:"mr-2 h-8 w-8"}),e.jsx("span",{children:"No backup data available. Setup may be required."})]});const s=Object.assign({totalBackups:0,dbBackups:0,fileBackups:0,incrementalBackups:0,cloudBackups:0,totalSize:0,totalSizeFormatted:"0 MB",latestDbBackup:null,latestFileBackup:null,latestIncrementalBackup:null},n.statistics||{});return s.latestDbBackup&&(s.latestDbBackup=s.latestDbBackup),s.latestFileBackup&&(s.latestFileBackup=s.latestFileBackup),s.latestIncrementalBackup&&(s.latestIncrementalBackup=s.latestIncrementalBackup),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(o,{className:"col-span-1 md:col-span-2",children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex justify-between",children:[e.jsx("span",{children:"System Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-3 w-3 rounded-full mr-2 ${W(n.status)}`}),e.jsx("span",{children:n.status==="operational"?"Operational":"Needs Attention"})]})]}),e.jsx(h,{children:"Overall system health and status of the backup infrastructure"})]}),e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-muted rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Backups"}),e.jsx("div",{className:"text-2xl font-bold",children:s.totalBackups})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Size"}),e.jsx("div",{className:"text-2xl font-bold",children:s.totalSizeFormatted})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Verified"}),e.jsx("div",{className:"text-lg font-semibold",children:n.verification.lastRun?y(n.verification.lastRun):"Never"})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cron Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${n.configuration.cronStatus==="Active"?"bg-green-500":"bg-yellow-500"}`}),e.jsx("div",{className:"font-semibold",children:n.configuration.cronStatus})]})]})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Latest Backups"}),e.jsx(h,{children:"The most recent backup files by type"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Database"})]}),s.latestDbBackup?(()=>{const a=s.latestDbBackup;return e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-sm",children:a.filename}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-1",children:[e.jsx("span",{children:y(a.created)}),e.jsxs("span",{children:[Math.round(a.size/1024/1024)," MB"]})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[a.verified?e.jsx(_,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(D,{className:"h-4 w-4 text-yellow-500 mr-1"}),e.jsx("span",{className:"text-sm",children:a.verified?"Verified":"Not Verified"})]})]})})():e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"No database backups available"})]}),e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Files"})]}),s.latestFileBackup?(()=>{const a=s.latestFileBackup;return e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-sm",children:a.filename}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-1",children:[e.jsx("span",{children:y(a.created)}),e.jsxs("span",{children:[Math.round(a.size/1024/1024)," MB"]})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[a.verified?e.jsx(_,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(D,{className:"h-4 w-4 text-yellow-500 mr-1"}),e.jsx("span",{className:"text-sm",children:a.verified?"Verified":"Not Verified"})]})]})})():e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"No file backups available"})]}),e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Incremental"})]}),s.latestIncrementalBackup?(()=>{const a=s.latestIncrementalBackup;return e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-sm",children:a.filename}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-1",children:[e.jsx("span",{children:y(a.created)}),e.jsxs("span",{children:[Math.round(a.size/1024/1024)," MB"]})]})]})})():e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"No incremental backups available"})]})]})}),e.jsx(F,{children:e.jsx(i,{variant:"outline",className:"w-full",onClick:()=>ee("backups"),children:"View All Backups"})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Actions"}),e.jsx(h,{children:"Trigger manual backup operations"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Start Backup"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{onClick:()=>k.mutate("full"),disabled:k.isPending,children:[k.isPending&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),"Full Backup"]}),e.jsx(i,{variant:"outline",onClick:()=>k.mutate("database"),disabled:k.isPending,children:"Database Only"}),e.jsx(i,{variant:"outline",onClick:()=>k.mutate("files"),disabled:k.isPending,children:"Files Only"}),e.jsx(i,{variant:"outline",onClick:()=>k.mutate("incremental"),disabled:k.isPending,children:"Incremental"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Verification"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{variant:"secondary",onClick:()=>L.mutate("basic"),disabled:L.isPending,children:[L.isPending&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),"Basic Check"]}),e.jsx(i,{variant:"outline",onClick:()=>L.mutate("thorough"),disabled:L.isPending,children:"Thorough"}),e.jsx(i,{variant:"outline",onClick:()=>L.mutate("full"),disabled:L.isPending,children:"Full Verify"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Cloud Storage"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(i,{variant:"secondary",onClick:()=>Y.mutate({provider:"default",encrypt:!0}),disabled:Y.isPending,children:[Y.isPending&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(ss,{className:"mr-2 h-4 w-4"}),"Upload to Cloud"]})})]})]})})]}),e.jsxs(o,{className:"col-span-1 md:col-span-2",children:[e.jsxs(m,{children:[e.jsx(x,{children:"Remote Servers"}),e.jsx(h,{children:"Status of configured remote backup servers"})]}),e.jsx(u,{children:n.remoteServers.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No remote servers configured. Add servers in the servers tab."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.remoteServers.map((a,c)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(is,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:a.name})]}),e.jsx("div",{className:`h-2 w-2 rounded-full ${W(a.status)}`})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:a.address}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsx(S,{variant:a.status==="Connected"?"default":"secondary",children:a.status})}),e.jsxs(i,{variant:"ghost",size:"sm",className:"mt-2 w-full",onClick:()=>G.mutate(a.name),disabled:G.isPending,children:[G.isPending&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),"Test Connection"]})]},c))})}),e.jsx(F,{children:e.jsx(i,{variant:"outline",className:"w-full",onClick:()=>ee("servers"),children:"Manage Servers"})})]})]})},Ae=()=>{if(X)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(f,{className:"mr-2 h-8 w-8 animate-spin"}),e.jsx("span",{children:"Loading backup files..."})]});if(!n||!n.recentBackups)return null;const s=n!=null&&n.recentBackups?{...n.recentBackups,database:n.recentBackups.database||[],files:n.recentBackups.files||[],incremental:n.recentBackups.incremental||[],cloud:n.recentBackups.cloud||[]}:{database:[],files:[],incremental:[],cloud:[]};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Database Backups"}),e.jsx(h,{children:"PostgreSQL database backup files"})]}),e.jsx(u,{children:s.database.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No database backups available"}):e.jsxs(A,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Filename"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Size"}),e.jsx(l,{children:"Status"})]})}),e.jsx(q,{children:s.database.map((a,c)=>e.jsxs(g,{children:[e.jsx(r,{className:"font-mono text-sm",children:a.filename}),e.jsx(r,{children:y(a.created)}),e.jsxs(r,{children:[Math.round(a.size/1024/1024)," MB"]}),e.jsx(r,{children:a.verified?e.jsxs(S,{variant:"default",className:"flex items-center bg-green-100 text-green-800",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Verified"]}):e.jsxs(S,{variant:"outline",className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Unverified"]})})]},c))})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"File Backups"}),e.jsx(h,{children:"Application files and assets"})]}),e.jsx(u,{children:s.files.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No file backups available"}):e.jsxs(A,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Filename"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Size"}),e.jsx(l,{children:"Status"})]})}),e.jsx(q,{children:s.files.map((a,c)=>e.jsxs(g,{children:[e.jsx(r,{className:"font-mono text-sm",children:a.filename}),e.jsx(r,{children:y(a.created)}),e.jsxs(r,{children:[Math.round(a.size/1024/1024)," MB"]}),e.jsx(r,{children:a.verified?e.jsxs(S,{variant:"default",className:"flex items-center bg-green-100 text-green-800",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Verified"]}):e.jsxs(S,{variant:"outline",className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Unverified"]})})]},c))})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Incremental Backups"}),e.jsx(h,{children:"Storage-efficient changes only backups"})]}),e.jsx(u,{children:s.incremental.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No incremental backups available"}):e.jsxs(A,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Filename"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Size"})]})}),e.jsx(q,{children:s.incremental.map((a,c)=>e.jsxs(g,{children:[e.jsx(r,{className:"font-mono text-sm",children:a.filename}),e.jsx(r,{children:y(a.created)}),e.jsxs(r,{children:[Math.round(a.size/1024/1024)," MB"]})]},c))})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Cloud Backups"}),e.jsx(h,{children:"Backups stored in cloud providers"})]}),e.jsx(u,{children:!s.cloud||s.cloud.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No cloud backups available"}):e.jsxs(A,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Filename"}),e.jsx(l,{children:"Provider"})]})}),e.jsx(q,{children:s.cloud.map((a,c)=>e.jsxs(g,{children:[e.jsx(r,{className:"font-mono text-sm",children:a.filename}),e.jsx(r,{children:a.provider})]},c))})]})})]})]})},ze=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Backup System Logs"}),e.jsx(h,{children:"View logs for various backup operations"})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(i,{variant:M==="backup"?"default":"outline",onClick:()=>U("backup"),children:"Backup Logs"}),e.jsx(i,{variant:M==="restore"?"default":"outline",onClick:()=>U("restore"),children:"Restore Logs"}),e.jsx(i,{variant:M==="verification"?"default":"outline",onClick:()=>U("verification"),children:"Verification Logs"}),e.jsx(i,{variant:M==="cron"?"default":"outline",onClick:()=>U("cron"),children:"Cron Logs"}),e.jsx(i,{variant:M==="cloud"?"default":"outline",onClick:()=>U("cloud"),children:"Cloud Logs"})]}),ve?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(f,{className:"h-8 w-8 animate-spin"})}):be?e.jsx("div",{className:"text-center py-8 text-red-500",children:"Error loading logs"}):!(K!=null&&K.lines)||K.lines.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No log entries available"}):e.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm overflow-x-auto",children:K.lines.map((s,a)=>e.jsx("div",{className:a%2===0?"":"bg-muted/50",children:s},a))})]}),e.jsx(F,{children:e.jsxs(i,{variant:"outline",className:"w-full",onClick:()=>ie(),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Refresh Logs"]})})]})}),qe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Remote Backup Servers"}),e.jsx(h,{children:"Configure and manage remote servers for backup replication"})]}),e.jsx(u,{children:X?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(f,{className:"h-8 w-8 animate-spin"})}):!(n!=null&&n.remoteServers)||n.remoteServers.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No remote servers configured"}):e.jsxs(A,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Address"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(q,{children:n.remoteServers.map((s,a)=>e.jsxs(g,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:s.address}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${W(s.status)}`}),s.status]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>G.mutate(s.name),disabled:G.isPending,children:"Test"}),e.jsx(i,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",children:e.jsx(pe,{className:"h-4 w-4"})})]})})]},a))})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Add New Server"}),e.jsx(h,{children:"Configure a new remote server for backup replication"})]}),e.jsx(u,{children:e.jsx(J,{...ce,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Server Name"}),e.jsx(d,{placeholder:"e.g., backup-server-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Server Address"}),e.jsx(d,{placeholder:"e.g., backup.example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SSH Username"}),e.jsx(d,{placeholder:"e.g., backup"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SSH Port"}),e.jsx(d,{placeholder:"22",type:"number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SSH Key Path"}),e.jsx(d,{placeholder:"e.g., /path/to/private_key"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Backup Directory"}),e.jsx(d,{placeholder:"e.g., /app/backups"})]})]})})}),e.jsx(F,{children:e.jsx(i,{className:"w-full",children:"Add Server"})})]})]}),Re=()=>{var s,a,c,I,he;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Email Notifications"}),e.jsx(T,{checked:((s=t==null?void 0:t.email)==null?void 0:s.enabled)||!1,onCheckedChange:b=>{E.mutate({enabled:b,level:"email"})}})]}),e.jsx(h,{children:"Configure email notifications for backup events"})]}),e.jsx(u,{children:le?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(f,{className:"h-6 w-6 animate-spin"})}):e.jsx(J,{...ce,children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SMTP Server"}),e.jsx(d,{placeholder:"e.g., smtp.example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SMTP Port"}),e.jsx(d,{placeholder:"587",type:"number"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SMTP Username"}),e.jsx(d,{placeholder:"e.g., user@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SMTP Password"}),e.jsx(d,{placeholder:"Password",type:"password"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"From Email Address"}),e.jsx(d,{placeholder:"e.g., backup-system@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Recipients (comma-separated)"}),e.jsx(d,{placeholder:"e.g., admin@example.com, alerts@example.com"})]})]})})}),e.jsx(F,{children:e.jsx(i,{className:"w-full",children:"Save Email Settings"})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Notification Levels"}),e.jsx(h,{children:"Configure which events trigger notifications"})]}),e.jsx(u,{children:le?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(f,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Success Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Notify when backup operations complete successfully"})]}),e.jsx(T,{checked:((a=t==null?void 0:t.levels)==null?void 0:a.success)||!1,onCheckedChange:b=>{E.mutate({enabled:b,level:"success"})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Info Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Notify about general informational events"})]}),e.jsx(T,{checked:((c=t==null?void 0:t.levels)==null?void 0:c.info)||!1,onCheckedChange:b=>{E.mutate({enabled:b,level:"info"})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Warning Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Notify about potential issues that need attention"})]}),e.jsx(T,{checked:((I=t==null?void 0:t.levels)==null?void 0:I.warning)||!1,onCheckedChange:b=>{E.mutate({enabled:b,level:"warning"})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Error Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Notify about critical errors and failures"})]}),e.jsx(T,{checked:((he=t==null?void 0:t.levels)==null?void 0:he.error)||!1,onCheckedChange:b=>{E.mutate({enabled:b,level:"error"})}})]})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Scheduled Reports"}),e.jsx(T,{checked:(t==null?void 0:t.scheduled)||!1,onCheckedChange:b=>{E.mutate({enabled:b,level:"scheduled"})}})]}),e.jsx(h,{children:"Configure periodic backup status reports"})]}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Report Frequency"}),e.jsxs(Ke,{children:[e.jsx(Ge,{children:e.jsx(Oe,{placeholder:"Select frequency"})}),e.jsxs(Qe,{children:[e.jsx(ae,{value:"daily",children:"Daily"}),e.jsx(ae,{value:"weekly",children:"Weekly"}),e.jsx(ae,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Report Time"}),e.jsx(d,{placeholder:"06:00"})]})]})})}),e.jsx(F,{children:e.jsx(i,{className:"w-full",children:"Save Report Settings"})})]})]})},Ee=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Backup Schedules"}),e.jsx(h,{children:"Configure custom schedules for different backup types"})]}),e.jsx(u,{children:ke?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(f,{className:"h-6 w-6 animate-spin"})}):we?e.jsx("div",{className:"text-center py-4 text-red-500",children:"Error loading schedule data"}):!Z||Z.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No schedules configured"}):e.jsx($e,{type:"single",collapsible:!0,className:"w-full",children:Z.map((s,a)=>e.jsxs(We,{value:s.name,children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${s.enabled?"bg-green-500":"bg-gray-300"}`}),e.jsx("span",{children:s.name}),s.status==="DUE NOW"&&e.jsx(S,{variant:"secondary",className:"ml-2",children:"Due Now"})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-medium",children:"Enabled"}),e.jsx(T,{checked:s.enabled,onCheckedChange:c=>{Me.mutate({scheduleName:s.name,enabled:c})}})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Description"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Cron Expression"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("code",{className:"bg-muted px-2 py-1 rounded text-sm",children:s.cron}),e.jsx(i,{variant:"ghost",size:"sm",className:"ml-2",children:"Edit"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Components"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.components.map((c,I)=>e.jsx(S,{variant:"outline",children:c},I))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Last Run"}),e.jsx("div",{className:"text-sm",children:s.lastRun==="Never"?"Never":y(s.lastRun)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Next Run"}),e.jsx("div",{className:"text-sm",children:y(s.nextRun)})]})]}),e.jsx("div",{className:"pt-2 flex justify-end space-x-2",children:e.jsx(i,{variant:"outline",size:"sm",children:"Run Now"})})]})})]},a))})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Create New Schedule"}),e.jsx(h,{children:"Define a new custom backup schedule"})]}),e.jsx(u,{children:e.jsx(J,{...Le,children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Schedule Name"}),e.jsx(d,{placeholder:"e.g., nightly-full-backup"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Schedule Description"}),e.jsx(d,{placeholder:"e.g., Full backup every night"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Cron Expression"}),e.jsx(d,{placeholder:"e.g., 0 1 * * *"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: minute hour day-of-month month day-of-week"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Components"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{id:"database"}),e.jsx("label",{htmlFor:"database",className:"text-sm font-medium",children:"Database Backup"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{id:"files"}),e.jsx("label",{htmlFor:"files",className:"text-sm font-medium",children:"Files Backup"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{id:"incremental"}),e.jsx("label",{htmlFor:"incremental",className:"text-sm font-medium",children:"Incremental Backup"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{id:"verification"}),e.jsx("label",{htmlFor:"verification",className:"text-sm font-medium",children:"Verification"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{id:"cloud"}),e.jsx("label",{htmlFor:"cloud",className:"text-sm font-medium",children:"Cloud Backup"})]})]})]})]})})}),e.jsx(F,{children:e.jsx(i,{className:"w-full",children:"Create Schedule"})})]})]}),Ie=()=>{if(Fe)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(f,{className:"mr-2 h-8 w-8 animate-spin"}),e.jsx("span",{children:"Loading storage analysis data..."})]});if(Te)return e.jsxs("div",{className:"flex items-center justify-center p-8 text-red-500",children:[e.jsx(D,{className:"mr-2 h-8 w-8"}),e.jsx("span",{children:"Error loading storage analysis data. Please try again."})]});if(!ne)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(D,{className:"mr-2 h-8 w-8"}),e.jsx("span",{children:"No storage analysis data available. Run the backup analyzer to generate insights."})]});const{history:s,growthMetrics:a}=ne;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Storage Growth Analysis"}),e.jsx(h,{children:"Backup storage trends and growth projections"})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:`bg-muted rounded-lg p-4 ${a.warningLevel==="critical"?"border-red-500 border-2":a.warningLevel==="warning"?"border-yellow-500 border-2":""}`,children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Storage Growth Rate"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Daily:"}),e.jsx("span",{className:"font-medium",children:a.dailyGrowthFormatted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Weekly:"}),e.jsx("span",{className:"font-medium",children:a.weeklyGrowthFormatted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly:"}),e.jsx("span",{className:"font-medium",children:a.monthlyGrowthFormatted})]})]})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Projected Storage"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"In 30 days:"}),e.jsx("span",{className:"font-medium",children:a.projectedSizeIn30DaysFormatted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"In 90 days:"}),e.jsx("span",{className:"font-medium",children:a.projectedSizeIn90DaysFormatted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Days until full:"}),e.jsx("span",{className:"font-medium",children:a.daysUntilFull!==null?a.daysUntilFull.toString():"N/A"})]})]})]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Storage Alert"}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:`h-3 w-3 rounded-full mr-2 ${a.warningLevel==="critical"?"bg-red-500":a.warningLevel==="warning"?"bg-yellow-500":"bg-green-500"}`}),e.jsx("span",{className:"font-medium",children:a.warningLevel==="critical"?"Critical":a.warningLevel==="warning"?"Warning":"Normal"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.warningLevel==="critical"?"Storage space is critically low. Immediate action required.":a.warningLevel==="warning"?"Storage growing quickly. Consider cleanup or expanding storage.":"Storage usage is within normal parameters."})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Historical Storage Trend"}),e.jsx("div",{className:"h-64 w-full",children:e.jsx("div",{className:"h-full w-full bg-muted rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(es,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage usage chart visualization would appear here"})]})})})]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Storage History"}),e.jsx(h,{children:"Historical backup storage analysis by date"})]}),e.jsx(u,{children:e.jsxs(A,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Total Size"}),e.jsx(l,{className:"hidden md:table-cell",children:"Database"}),e.jsx(l,{className:"hidden md:table-cell",children:"Files"}),e.jsx(l,{className:"hidden md:table-cell",children:"Incremental"}),e.jsx(l,{className:"hidden md:table-cell",children:"Backups"})]})}),e.jsx(q,{children:s.map((c,I)=>e.jsxs(g,{children:[e.jsx(r,{children:new Date(c.date).toLocaleDateString()}),e.jsx(r,{children:c.totalSizeFormatted}),e.jsxs(r,{className:"hidden md:table-cell",children:[Math.round(c.dbSize/1024/1024)," MB"]}),e.jsxs(r,{className:"hidden md:table-cell",children:[Math.round(c.filesSize/1024/1024)," MB"]}),e.jsxs(r,{className:"hidden md:table-cell",children:[Math.round(c.incrementalSize/1024/1024)," MB"]}),e.jsx(r,{className:"hidden md:table-cell",children:c.backupCount})]},I))})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Storage Analysis Actions"}),e.jsx(h,{children:"Tools for managing backup storage"})]}),e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Analysis Tools"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"w-full",onClick:()=>p({title:"Analysis Started",description:"Storage analysis has been initiated."}),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Run New Analysis"]}),e.jsxs(i,{variant:"outline",className:"w-full",onClick:()=>te(),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Refresh Data"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Maintenance"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{variant:"outline",className:"w-full",onClick:()=>p({title:"Cleanup Started",description:"Storage cleanup process has been initiated."}),children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Cleanup Old Backups"]}),e.jsxs(i,{variant:"outline",className:"w-full",onClick:()=>p({title:"Compression Started",description:"Backup compression process has been initiated."}),children:[e.jsx(as,{className:"mr-2 h-4 w-4"}),"Compress Backups"]})]})]})]})})]})]})},Ve=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Geographic Replication"}),e.jsx(T,{checked:(N==null?void 0:N.enabled)||!1,onCheckedChange:s=>{w.mutate({action:"configure",enabled:s})},disabled:re||w.isPending})]}),e.jsx(h,{children:"Replicate backups to remote geographic regions for disaster recovery"})]}),e.jsx(u,{children:re?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(f,{className:"h-6 w-6 animate-spin"})}):Ce?e.jsx("div",{className:"text-center py-4 text-red-500",children:"Error loading geographic replication data"}):e.jsxs("div",{className:"space-y-4",children:[!(N!=null&&N.regions)||N.regions.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No geographic regions configured"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.regions.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:s.name}),s.status&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${W(s.status)}`}),e.jsx("span",{className:"text-sm",children:s.status})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:s.description}),s.type&&e.jsx(S,{variant:"outline",className:"mt-2",children:s.type}),s.hostname&&e.jsxs("div",{className:"text-sm mt-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Server:"})," ",s.hostname]}),s.type!=="Local Primary"&&e.jsxs("div",{className:"flex space-x-2 mt-3",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>w.mutate({action:"test",region:s.name}),disabled:w.isPending,children:"Test Connection"}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>w.mutate({action:"replicate"}),disabled:w.isPending,children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),"Replicate Now"]})]})]},a))}),(N==null?void 0:N.history)&&N.history.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Recent Synchronization History"}),e.jsxs(A,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Timestamp"}),e.jsx(l,{children:"Region"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Details"})]})}),e.jsx(q,{children:N.history.map((s,a)=>e.jsxs(g,{children:[e.jsx(r,{children:y(s.timestamp)}),e.jsx(r,{children:s.region}),e.jsx(r,{children:e.jsx(S,{variant:s.status==="Success"?"default":"destructive",children:s.status})}),e.jsxs(r,{children:[e.jsx("div",{className:"text-sm",children:s.files}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.duration})]})]},a))})]})]})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Add New Region"}),e.jsx(h,{children:"Configure a new geographic region for backup replication"})]}),e.jsx(u,{children:e.jsx(J,{...de,children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Region Name"}),e.jsx(d,{placeholder:"e.g., us-west"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(d,{placeholder:"e.g., US West Coast Data Center"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Hostname"}),e.jsx(d,{placeholder:"e.g., backup-west.example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Backup Directory"}),e.jsx(d,{placeholder:"e.g., /app/backups"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SSH User"}),e.jsx(d,{placeholder:"e.g., backup"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SSH Port"}),e.jsx(d,{placeholder:"22"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SSH Key Path"}),e.jsx(d,{placeholder:"e.g., /root/.ssh/id_rsa"})]})]})})}),e.jsx(F,{children:e.jsxs(i,{className:"w-full",onClick:()=>{const s=de.getValues();w.mutate({action:"add-region",region:{name:s.name,hostname:s.hostname,directory:s.directory,user:s.user,keyPath:s.keyPath,port:s.port}})},disabled:w.isPending,children:[w.isPending&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Region"]})})]})]});return e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Backup Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Advanced backup system with monitoring, scheduling, and geo-replication"})]}),e.jsxs(i,{onClick:()=>Ne(),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs(He,{value:H,onValueChange:ee,children:[e.jsxs(Ue,{className:"mb-6",children:[e.jsx(C,{value:"overview",children:"Overview"}),e.jsx(C,{value:"backups",children:"Backups"}),e.jsx(C,{value:"storage",children:"Storage Analysis"}),e.jsx(C,{value:"logs",children:"Logs"}),e.jsx(C,{value:"servers",children:"Servers"}),e.jsx(C,{value:"notifications",children:"Notifications"}),e.jsx(C,{value:"schedule",children:"Schedule"}),e.jsx(C,{value:"geo-replication",children:"Geo-Replication"})]}),e.jsx(B,{value:"overview",children:Pe()}),e.jsx(B,{value:"backups",children:Ae()}),e.jsx(B,{value:"storage",children:Ie()}),e.jsx(B,{value:"logs",children:ze()}),e.jsx(B,{value:"servers",children:qe()}),e.jsx(B,{value:"notifications",children:Re()}),e.jsx(B,{value:"schedule",children:Ee()}),e.jsx(B,{value:"geo-replication",children:Ve()})]})]})}export{ms as default};
