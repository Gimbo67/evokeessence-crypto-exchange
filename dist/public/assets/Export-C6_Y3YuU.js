import{c as m,j as e,a5 as r,B as i,aV as T,b1 as L,_ as F,r as N,h as z,d as I,C as d,N as o,O as x,Q as v,e as h,b2 as b,a9 as w,b3 as k,Y as A,M as H,aI as M,f as D,b4 as B}from"./index-DzUQlMCL.js";import{F as R}from"./file-text-xMDIOZi1.js";import{C as G}from"./chart-column-CcdXueSi.js";import{S as U}from"./settings-C3McDjct.js";import{D as O}from"./database-B90c4x7u.js";import{A as q,F as V}from"./file-down-CRwM9CQS.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=m("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=m("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=m("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);function Y(){return e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{href:"/admin/dashboard",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Admin Dashboard"]})}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx(r,{href:"/admin/clients",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Clients"]})}),e.jsx(r,{href:"/admin/transactions",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Transactions"]})}),e.jsx(r,{href:"/admin/analytics",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Analytics"]})}),e.jsx(r,{href:"/admin/kyc",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"KYC"]})}),e.jsx(r,{href:"/admin/security",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"Security"]})}),e.jsx(r,{href:"/admin/backup",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Backup"]})}),e.jsx(r,{href:"/admin/export",children:e.jsxs(i,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),"Export"]})})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(r,{href:"/dashboard",children:e.jsxs(i,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Back to Dashboard"]})})})]})})}function se(){const[c,j]=N.useState(!1),[p,n]=N.useState(0),{toast:g}=z(),{data:t,isLoading:S,error:C}=I({queryKey:["/api/export","info"],queryFn:async()=>{const s=await fetch("/api/export/info");if(!s.ok)throw new Error("Failed to fetch export information");return s.json()},refetchInterval:3e4,retry:3}),E=async()=>{var s;try{j(!0),n(10);const a=await fetch("/api/export/download");if(!a.ok)throw new Error("Failed to download project files");n(50);const f=a.headers.get("content-disposition"),u=f?(s=f.split("filename=")[1])==null?void 0:s.replace(/"/g,""):`evokeessence-crypto-exchange-${new Date().toISOString().split("T")[0]}.zip`;n(80);const P=await a.blob(),y=window.URL.createObjectURL(P),l=document.createElement("a");l.style.display="none",l.href=y,l.download=u,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(y),document.body.removeChild(l),n(100),g({title:"Download Complete",description:`Project files downloaded as ${u}`})}catch(a){console.error("Download error:",a),g({title:"Download Failed",description:a instanceof Error?a.message:"Failed to download project files",variant:"destructive"})}finally{j(!1),n(0)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Y,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Project Export"}),e.jsx("p",{className:"text-gray-600",children:"Export your complete project or push to GitHub repository"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"GitHub Integration"]}),e.jsx(v,{children:"Push your project to GitHub for version control and collaboration"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs(b,{children:[e.jsx(w,{className:"h-4 w-4"}),e.jsxs(k,{children:["To push to GitHub, follow the instructions in the ",e.jsx("code",{children:"GITHUB_SETUP.md"})," file in your project root. This includes creating a repository, configuring Git, and pushing your code."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Quick Setup Steps:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-600",children:[e.jsx("li",{children:"Create a new repository on GitHub"}),e.jsxs("li",{children:["Run: ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"git remote add origin [your-repo-url]"})]}),e.jsxs("li",{children:["Run: ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'git add . && git commit -m "Initial commit"'})]}),e.jsxs("li",{children:["Run: ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"git push -u origin main"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Sensitive files are already protected by .gitignore"})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Project Export"]}),e.jsx(v,{children:"Download a complete ZIP archive of your project files"})]}),e.jsxs(h,{className:"space-y-4",children:[S&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading export information..."})]}),C&&e.jsxs(b,{variant:"destructive",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx(k,{children:"Failed to load export information. Please try again."})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.totalFiles}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Files"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[t.estimatedSizeMB," MB"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Estimated Size"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Object.keys(t.fileTypes).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"File Types"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.excludedPatterns.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Excluded Patterns"})]})]}),e.jsx(M,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"File Types Included:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(t.fileTypes).sort(([,s],[,a])=>a-s).slice(0,10).map(([s,a])=>e.jsxs(D,{variant:"secondary",children:[s==="no-extension"?"no ext":s,": ",a]},s)),Object.keys(t.fileTypes).length>10&&e.jsxs(D,{variant:"outline",children:["+",Object.keys(t.fileTypes).length-10," more"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Security - Excluded from Export:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("div",{children:"• Environment files (.env*)"}),e.jsx("div",{children:"• Database files (*.sqlite*)"}),e.jsx("div",{children:"• SSL certificates (*.pem, *.key, *.crt)"}),e.jsx("div",{children:"• Service account keys"}),e.jsx("div",{children:"• Node modules and build artifacts"}),e.jsx("div",{children:"• Logs and temporary files"})]})]}),c&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Preparing download..."}),e.jsxs("span",{className:"text-sm text-gray-600",children:[p,"%"]})]}),e.jsx(B,{value:p,className:"w-full"})]}),e.jsxs(i,{onClick:E,disabled:c,className:"w-full",size:"lg",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),c?"Preparing Download...":"Download Project Files"]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",new Date(t.lastUpdated).toLocaleString()]})]})]})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"What's Included?"]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-green-600",children:"✓ Included"}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[e.jsx("li",{children:"• Complete source code (frontend + backend)"}),e.jsx("li",{children:"• Database schema and migrations"}),e.jsx("li",{children:"• Configuration files"}),e.jsx("li",{children:"• Documentation (README, setup guides)"}),e.jsx("li",{children:"• Mobile app projects (React Native)"}),e.jsx("li",{children:"• Package.json and dependencies list"}),e.jsx("li",{children:"• TypeScript configuration"}),e.jsx("li",{children:"• Tailwind and Vite configuration"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-red-600",children:"✗ Excluded (Security)"}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[e.jsx("li",{children:"• Environment variables (.env files)"}),e.jsx("li",{children:"• Database files and backups"}),e.jsx("li",{children:"• SSL certificates and private keys"}),e.jsx("li",{children:"• Service account credentials"}),e.jsx("li",{children:"• User session data"}),e.jsx("li",{children:"• Build artifacts and node_modules"}),e.jsx("li",{children:"• Logs and temporary files"}),e.jsx("li",{children:"• Large asset uploads"})]})]})]})})]})]})]})]})}export{se as default};
