import{c as se,h as te,r as j,i as I,k as we,l as _e,j as e,P as re,m as K,n as Ze,o as es,p as ss,q as Ce,s as ts,t as rs,R as as,v as ns,w as ke,x as is,b as ae,B as b,y as w,z as Re,A as De,D as Ee,E as Se,F as R,L as B,G as os,H as ds,a as ls,J as cs,d as ce,K as me,g as ms,C as L,e as $,M as ue,N as M,O as G,Q as H,f as C,T as O,U as pe,V as xe,W as E,X as S,Y as us,Z as ps,_ as he,$ as xs,a0 as hs,a1 as fs}from"./index-DzUQlMCL.js";import{C as T}from"./checkbox-DMV5nDXs.js";import{A as Q,a as fe,b as J,c as X,d as W,e as q,f as Y,g as Z,h as ee}from"./alert-dialog-DoTVPQra.js";import{A as gs}from"./layout-Dhtj2VcD.js";import{D as js,a as vs,b as Ns,c as bs,d as ys,e as ws,f as _s}from"./dialog-kbAvU9vg.js";import{F as ge}from"./file-text-xMDIOZi1.js";import{A as Cs,F as je}from"./file-down-CRwM9CQS.js";import{E as ve}from"./eye-DGtliPfs.js";import{A as ks}from"./activity-EH2qfgKr.js";import{T as Ne}from"./trash-2-D7Ii7HN2.js";import{E as z}from"./external-link-yJkabYVq.js";import"./chart-column-CcdXueSi.js";import"./search-BvG8QWW9.js";import"./hard-drive-nPyOXBYa.js";import"./log-out-DkZZLLuv.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=se("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=se("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);async function Te(r,n={}){const{method:o="GET",body:p,headers:t={},timeoutMs:a=1e4,cache:h="no-store"}=n,l=new AbortController,g=setTimeout(()=>l.abort(),a);try{const x={Accept:"application/json","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",...t},v={method:o,headers:x,credentials:"include",signal:l.signal,cache:h};p&&(v.body=typeof p=="string"?p:JSON.stringify(p));const i=await fetch(r,v);if(clearTimeout(g),(i.headers.get("Content-Type")||"").includes("text/html")){console.error(`Received HTML response from ${r}`);try{const d=await i.text();console.error(`HTML content (truncated): ${d.substring(0,200)}...`)}catch(d){console.error("Failed to read HTML response:",d)}throw new Error("Received HTML instead of JSON response. Please try again or log in again if the issue persists.")}if(!i.ok){let d=`API request failed: ${i.status} ${i.statusText}`;try{const u=await i.json();d=u.error||u.message||d}catch(u){console.error("Failed to parse error response:",u)}throw new Error(d)}try{return i.headers.get("Content-Length")==="0"||i.status===204?{}:await i.json()}catch(d){throw console.error("Failed to parse JSON response:",d),new Error("Invalid response format from server")}}catch(x){throw clearTimeout(g),x.name==="AbortError"?new Error("Request timed out. Please try again."):x}}async function Ds(r,n={}){return Te(r,{...n,method:"GET"})}async function Es(r,n={}){return Te(r,{...n,method:"DELETE"})}async function Ss(r){try{console.log(`Exporting data for user ID: ${r}`);const n=await Ds(`/bypass/admin/export-user/${r}`);return console.log("Export API response:",n),n&&!n.success&&!n.data?(console.warn("Export response missing success property or data",n),{success:!0,message:"User data exported successfully",data:n}):n}catch(n){throw console.error("Error in exportUserData:",n),n}}async function Ts(r){try{console.log(`Deleting user with ID: ${r}`);const n=await Es(`/bypass/admin/delete-user/${r}`);return console.log("Delete API response:",n),n&&!n.success?(console.warn("Delete response missing success property",n),{success:!0,message:"User deleted successfully",data:n}):n}catch(n){throw console.error("Error in deleteUser:",n),n}}function As(){const{toast:r}=te(),[n,o]=j.useState(!1),p=I({mutationFn:async l=>await Ss(l),onSuccess:l=>{var g;console.log("Export successful, data received:",l),r({title:"Data export successful",description:"All user data has been successfully exported.",variant:"default"});try{const x=l.data?l.data:l,v=JSON.stringify(x,null,2),i=((g=x.user)==null?void 0:g.id)||"unknown",N=new Blob([v],{type:"application/json"}),d=URL.createObjectURL(N),u=document.createElement("a");u.href=d,u.download=`user-${i}-export.json`,document.body.appendChild(u),u.click(),URL.revokeObjectURL(d),document.body.removeChild(u)}catch(x){console.error("Error processing exported data:",x),r({title:"Export processing failed",description:"The data was exported but couldn't be downloaded. Check console for details.",variant:"destructive"})}return l},onError:l=>{r({title:"Data export failed",description:l.message||"There was an error exporting user data.",variant:"destructive"})}}),t=I({mutationFn:async l=>await Ts(l),onSuccess:()=>{r({title:"User deleted",description:"The user and all associated data have been permanently deleted.",variant:"default"}),o(!1)},onError:l=>{r({title:"Deletion failed",description:l.message||"There was an error deleting the user.",variant:"destructive"}),o(!1)}});return{exportUserData:async l=>p.mutateAsync(l),deleteUser:async l=>{o(!0);try{return await p.mutateAsync(l),await t.mutateAsync(l),!0}catch{return o(!1),!1}},isExporting:p.isPending,isDeleting:t.isPending||n,isConfirmingDeletion:n}}var ne="Radio",[Fs,Ae]=we(ne),[Ls,$s]=Fs(ne),Fe=j.forwardRef((r,n)=>{const{__scopeRadio:o,name:p,checked:t=!1,required:a,disabled:h,value:l="on",onCheck:g,form:x,...v}=r,[i,N]=j.useState(null),d=_e(n,f=>N(f)),u=j.useRef(!1),c=i?x||!!i.closest("form"):!0;return e.jsxs(Ls,{scope:o,checked:t,disabled:h,children:[e.jsx(re.button,{type:"button",role:"radio","aria-checked":t,"data-state":Pe(t),"data-disabled":h?"":void 0,disabled:h,value:l,...v,ref:d,onClick:K(r.onClick,f=>{t||g==null||g(),c&&(u.current=f.isPropagationStopped(),u.current||f.stopPropagation())})}),c&&e.jsx(Ps,{control:i,bubbles:!u.current,name:p,value:l,checked:t,required:a,disabled:h,form:x,style:{transform:"translateX(-100%)"}})]})});Fe.displayName=ne;var Le="RadioIndicator",$e=j.forwardRef((r,n)=>{const{__scopeRadio:o,forceMount:p,...t}=r,a=$s(Le,o);return e.jsx(Ze,{present:p||a.checked,children:e.jsx(re.span,{"data-state":Pe(a.checked),"data-disabled":a.disabled?"":void 0,...t,ref:n})})});$e.displayName=Le;var Ps=r=>{const{control:n,checked:o,bubbles:p=!0,...t}=r,a=j.useRef(null),h=es(o),l=ss(n);return j.useEffect(()=>{const g=a.current,x=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(x,"checked").set;if(h!==o&&i){const N=new Event("click",{bubbles:p});i.call(g,o),g.dispatchEvent(N)}},[h,o,p]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:o,...t,tabIndex:-1,ref:a,style:{...r.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Pe(r){return r?"checked":"unchecked"}var Os=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ie="RadioGroup",[Us,nt]=we(ie,[Ce,Ae]),Oe=Ce(),Ue=Ae(),[Is,Ms]=Us(ie),Ie=j.forwardRef((r,n)=>{const{__scopeRadioGroup:o,name:p,defaultValue:t,value:a,required:h=!1,disabled:l=!1,orientation:g,dir:x,loop:v=!0,onValueChange:i,...N}=r,d=Oe(o),u=ts(x),[c,f]=rs({prop:a,defaultProp:t,onChange:i});return e.jsx(Is,{scope:o,name:p,required:h,disabled:l,value:c,onValueChange:f,children:e.jsx(as,{asChild:!0,...d,orientation:g,dir:u,loop:v,children:e.jsx(re.div,{role:"radiogroup","aria-required":h,"aria-orientation":g,"data-disabled":l?"":void 0,dir:u,...N,ref:n})})})});Ie.displayName=ie;var Me="RadioGroupItem",Ge=j.forwardRef((r,n)=>{const{__scopeRadioGroup:o,disabled:p,...t}=r,a=Ms(Me,o),h=a.disabled||p,l=Oe(o),g=Ue(o),x=j.useRef(null),v=_e(n,x),i=a.value===t.value,N=j.useRef(!1);return j.useEffect(()=>{const d=c=>{Os.includes(c.key)&&(N.current=!0)},u=()=>N.current=!1;return document.addEventListener("keydown",d),document.addEventListener("keyup",u),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",u)}},[]),e.jsx(ns,{asChild:!0,...l,focusable:!h,active:i,children:e.jsx(Fe,{disabled:h,required:a.required,checked:i,...g,...t,name:a.name,ref:v,onCheck:()=>a.onValueChange(t.value),onKeyDown:K(d=>{d.key==="Enter"&&d.preventDefault()}),onFocus:K(t.onFocus,()=>{var d;N.current&&((d=x.current)==null||d.click())})})})});Ge.displayName=Me;var Gs="RadioGroupIndicator",He=j.forwardRef((r,n)=>{const{__scopeRadioGroup:o,...p}=r,t=Ue(o);return e.jsx($e,{...t,...p,ref:n})});He.displayName=Gs;var ze=Ie,Ve=Ge,Hs=He;const Ke=j.forwardRef(({className:r,...n},o)=>e.jsx(ze,{className:ke("grid gap-2",r),...n,ref:o}));Ke.displayName=ze.displayName;const U=j.forwardRef(({className:r,...n},o)=>e.jsx(Ve,{ref:o,className:ke("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...n,children:e.jsx(Hs,{className:"flex items-center justify-center",children:e.jsx(is,{className:"h-2.5 w-2.5 fill-current text-current"})})}));U.displayName=Ve.displayName;function zs({userId:r,userData:n,transactions:o,className:p=""}){const[t,a]=j.useState(!1),[h,l]=j.useState(!1),[g,x]=j.useState("en"),[v,i]=j.useState("full"),{toast:N}=te(),d=ae(),u=async()=>{try{l(!0);let c=[...o];v==="deposits"?c=o.filter(f=>f.type.toLowerCase().includes("deposit")):v==="crypto"&&(c=o.filter(f=>f.type.toLowerCase().includes("usdt")||f.type.toLowerCase().includes("usdc"))),os(c,n,d,g),N({title:d("statement_generated"),description:d("statement_generated_description"),variant:"default"}),a(!1)}catch(c){console.error("Error generating statement:",c),N({title:d("statement_generation_error"),description:d("statement_generation_error_description"),variant:"destructive"})}finally{l(!1)}};return e.jsxs(js,{open:t,onOpenChange:a,children:[e.jsx(vs,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:`gap-2 ${p}`,children:[e.jsx(ge,{className:"h-4 w-4"}),d("generate_statement")]})}),e.jsxs(Ns,{children:[e.jsxs(bs,{children:[e.jsx(ys,{children:d("generate_account_statement")}),e.jsx(ws,{children:d("generate_statement_description")})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"language",children:d("statement_language")}),e.jsxs(Re,{value:g,onValueChange:x,children:[e.jsx(De,{id:"language",children:e.jsx(Ee,{placeholder:d("select_language")})}),e.jsxs(Se,{children:[e.jsx(R,{value:"en",children:d("language_english")}),e.jsx(R,{value:"de",children:d("language_german")}),e.jsx(R,{value:"cs",children:d("language_czech")})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{children:d("statement_type")}),e.jsxs(Ke,{value:v,onValueChange:i,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{value:"full",id:"full"}),e.jsx(w,{htmlFor:"full",children:d("all_transactions")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{value:"deposits",id:"deposits"}),e.jsx(w,{htmlFor:"deposits",children:d("deposits_only")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{value:"crypto",id:"crypto"}),e.jsx(w,{htmlFor:"crypto",children:d("crypto_only")})]})]})]})]}),e.jsxs(_s,{children:[e.jsx(b,{variant:"outline",onClick:()=>a(!1),children:d("cancel")}),e.jsx(b,{onClick:u,disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),d("generating")]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),d("generate")]})})]})]})]})}function it({id:r}){const n=ds(),o=r||(n==null?void 0:n.id);console.log("Rendering ClientDetailPage for id:",o);const[,p]=ls(),t=ae(),{toast:a}=te(),h=cs(),{exportUserData:l,deleteUser:g,isExporting:x,isDeleting:v}=As(),{data:i,isLoading:N,error:d,refetch:u}=ce({queryKey:[`/api/admin/clients/${o}`],queryFn:async()=>{console.log("Fetching client data for id:",o);try{const s=await fetch(`/api/admin/clients/${o}`,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache, no-store"}});if(console.log("Client details response:",{status:s.status,statusText:s.statusText,contentType:s.headers.get("Content-Type"),cacheControl:s.headers.get("Cache-Control")}),s.status===401)throw console.error("Authentication required for client details"),setTimeout(()=>{window.location.href="/login?redirect=/admin/clients/"+o},1e3),new Error("Authentication required. Redirecting to login...");if(!s.ok){console.error(`Failed to fetch client details: ${s.status} ${s.statusText}`);let y="Failed to fetch client details";try{const _=await s.json();_.message&&(y=_.message),_.details&&(y+=": "+_.details)}catch(_){console.error("Could not parse error details:",_)}throw new Error(y)}const m=await s.json();return console.log("Received client data:",m),m}catch(s){throw console.error("Error fetching client data:",s),s}},enabled:!!o,staleTime:3e4,refetchInterval:6e4,retry:1,retryDelay:1e3}),{data:c,isLoading:f,error:k,refetch:A}=ce({queryKey:[`/bypass/profile-updates/user/${o}`],queryFn:async()=>{console.log("Fetching profile update requests for client:",o);try{console.log(`Making API request to bypass route: /bypass/profile-updates/user/${o}`);const s=await fetch(`/bypass/profile-updates/user/${o}`,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw console.error("Failed to fetch profile update requests:",s.status,s.statusText),new Error("Failed to fetch profile update requests");const m=await s.json();return console.log("Profile update requests response:",m),m&&m.updates?m.updates:Array.isArray(m)?m:(console.log("No profile update requests found"),[])}catch(s){return console.error("Error fetching profile update requests:",s),[]}},enabled:!!o,staleTime:3e4,retry:1}),Be=I({mutationFn:async s=>{const m=await fetch(`/api/admin/clients/${o}/kyc`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:s})});if(!m.ok)throw new Error("Failed to update KYC status");return m.json()},onSuccess:()=>{h.invalidateQueries({queryKey:[`/api/admin/clients/${o}`]}),a({title:t("success"),description:t("kyc_status_updated_success")})},onError:()=>{a({variant:"destructive",title:t("error"),description:t("kyc_status_update_failed")})}}),oe=I({mutationFn:async({requestId:s,action:m,comment:y,selectedFields:_})=>{console.log("Reviewing profile update request:",{requestId:s,action:m,comment:y,selectedFields:_});const de={status:m==="approve"?"approved":"rejected",adminComment:y};m==="approve"&&_&&(de.selectedFields=_,console.log("Sending selected fields for approval:",_));const D=await fetch(`/bypass/profile-updates/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(de)});if(!D.ok){console.error("Failed to update profile request:",D.status,D.statusText);const Ye=await D.text();throw console.error("Error details:",Ye),new Error(`Failed to ${m} profile update request: ${D.statusText}`)}const le=await D.json();return console.log("Profile update response:",le),le},onSuccess:()=>{h.invalidateQueries({queryKey:[`/api/admin/clients/${o}`]}),h.invalidateQueries({queryKey:[`/bypass/profile-updates/user/${o}`]}),u(),A(),a({title:t("success"),description:t("profile_update_reviewed_success")})},onError:s=>{console.error("Error reviewing profile update:",s),a({variant:"destructive",title:t("error"),description:s.message||t("profile_update_review_failed")})}}),F=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=(s,m)=>{if(m==="USDC"||m==="USDT"||m==="SOL"||!["USD","EUR","GBP","CHF"].includes(m))return`${s.toFixed(2)} ${m}`;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:m,minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch(y){return console.error(`Error formatting currency ${m}:`,y),`${s.toFixed(2)} ${m}`}},Qe=s=>{switch(s.toLowerCase()){case"deposit":return e.jsx(he,{className:"h-4 w-4"});case"withdrawal":return e.jsx(ye,{className:"h-4 w-4"});default:return e.jsx(xs,{className:"h-4 w-4"})}},Je=()=>{u(),a({title:t("refreshing"),description:t("refreshing_client_data")})},Xe=[{id:"client-detail",title:t("client_details"),defaultSize:100,content:e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsxs(b,{variant:"ghost",className:"gap-2 hover:bg-accent/10",onClick:()=>p("/admin/clients"),children:[e.jsx(Cs,{className:"h-4 w-4"}),t("back_to_clients")]}),e.jsxs(b,{variant:"outline",className:"gap-2 hover:bg-accent/10 ml-auto",onClick:Je,children:[e.jsx(me,{className:"h-4 w-4"}),t("refresh")]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:t("admin_clients")}),e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-foreground",children:(i==null?void 0:i.username)||o})]})]}),N?e.jsx("div",{className:"space-y-4",children:e.jsx(L,{children:e.jsx($,{className:"p-6",children:e.jsx("div",{className:"h-24 animate-pulse bg-accent/10 rounded-lg"})})})}):d?e.jsx(L,{children:e.jsxs($,{className:"p-6 text-center",children:[e.jsx(ue,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),e.jsx("p",{className:"text-destructive",children:t("error_loading_client")})]})}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[e.jsxs(M,{children:[e.jsx(G,{children:t("client_information")}),e.jsx(H,{children:t("client_details_description")})]}),e.jsxs($,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("username")}),e.jsx("p",{className:"text-lg font-medium",children:i.username})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("email")}),e.jsx("p",{className:"text-lg",children:i.email})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("full_name")}),e.jsx("p",{className:"text-lg",children:i.fullName||t("not_provided")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("phone")}),e.jsx("p",{className:"text-lg",children:i.phoneNumber||t("not_provided")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("address")}),e.jsx("p",{className:"text-lg",children:i.address||t("not_provided")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("country")}),e.jsx("p",{className:"text-lg",children:i.countryOfResidence||t("not_provided")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("gender")}),e.jsx("p",{className:"text-lg",children:i.gender||t("not_provided")})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:[t("password")," (Hashed)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono text-xs overflow-hidden text-ellipsis max-w-[300px]",children:i.password||t("not_provided")}),i.password&&e.jsxs(b,{variant:"outline",size:"sm",className:"h-6",onClick:()=>{navigator.clipboard.writeText(i.password),a({title:t("success"),description:t("password_copied")})},children:[e.jsx(ve,{className:"h-3 w-3 mr-1"})," ",t("copy")]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("kyc_status")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:O(i.kycStatus||i.kyc_status||""),className:"capitalize",children:(i.kycStatus||i.kyc_status||"").toLowerCase().replace("_"," ")}),e.jsxs(Re,{defaultValue:i.kycStatus,onValueChange:s=>Be.mutate(s),children:[e.jsx(De,{className:"w-[180px]",children:e.jsx(Ee,{placeholder:t("select_status")})}),e.jsxs(Se,{children:[e.jsx(R,{value:"not_started",children:t("kyc_not_started")}),e.jsx(R,{value:"pending",children:t("kyc_pending")}),e.jsx(R,{value:"in_progress",children:t("kyc_in_progress")}),e.jsx(R,{value:"approved",children:t("kyc_approved")}),e.jsx(R,{value:"rejected",children:t("kyc_rejected")})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("registration_date")}),e.jsx("p",{className:"text-lg",children:F(i.createdAt)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("last_login")}),e.jsx("p",{className:"text-lg",children:i.lastLoginAt?F(i.lastLoginAt):t("never")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("balance")}),e.jsx("p",{className:"text-lg font-medium",children:P(parseFloat(i.balance.toString()),i.balanceCurrency||"EUR")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("two_factor_authentication")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:i.twoFactorEnabled?"success":"default",className:"capitalize",children:i.twoFactorEnabled?t("enabled"):t("disabled")}),i.twoFactorEnabled&&e.jsx(b,{variant:"destructive",size:"sm",onClick:async()=>{if(confirm(t("confirm_disable_2fa")))try{if(!(await fetch(`/api/admin/2fa/disable/${i.id}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to disable 2FA");h.invalidateQueries({queryKey:[`/api/admin/clients/${o}`]}),h.invalidateQueries({queryKey:[`/api/admin/client/${o}`]}),u(),a({title:t("success"),description:t("2fa_disabled_success")})}catch(s){console.error("Error disabling 2FA:",s),a({variant:"destructive",title:t("error"),description:t("2fa_disable_failed")})}},children:t("disable_2fa")})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6 pt-6 border-t border-border/40",children:[e.jsxs(b,{className:"gap-2 bg-primary/10 hover:bg-primary/20",onClick:()=>p(`/admin/clients/${o}/kyc`),children:[e.jsx(ve,{className:"h-4 w-4"}),t("view_kyc_documents")]}),e.jsxs(b,{variant:"outline",className:"gap-2 hover:bg-accent/10",onClick:()=>p(`/admin/clients/${o}/activity`),children:[e.jsx(ks,{className:"h-4 w-4"}),t("view_activity_log")]}),e.jsxs(b,{variant:"outline",className:"gap-2 hover:bg-primary/10",onClick:()=>{var s;(s=document.getElementById("profile-updates-section"))==null||s.scrollIntoView({behavior:"smooth"})},children:[e.jsx(be,{className:"h-4 w-4"}),t("profile_update_requests"),c&&c.filter(s=>s.status==="pending").length>0&&e.jsx(C,{variant:"secondary",className:"ml-2",children:c.filter(s=>s.status==="pending").length})]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs(Q,{children:[e.jsx(fe,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:"gap-2 border-blue-500/20 text-blue-500 hover:bg-blue-500/10",disabled:x,children:[e.jsx(je,{className:"h-4 w-4"}),t(x?"exporting_data":"export_user_data")]})}),e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsx(W,{children:t("export_user_data_title")}),e.jsx(q,{children:t("export_user_data_description")})]}),e.jsxs(Y,{children:[e.jsx(Z,{children:t("cancel")}),e.jsxs(ee,{onClick:()=>l(i.id),disabled:x,children:[x?e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(je,{className:"mr-2 h-4 w-4"}),t("confirm_export")]})]})]})]}),e.jsx(zs,{userId:i.id,userData:i,transactions:i.transactions,className:"border-green-500/20 text-green-600 hover:bg-green-500/10"}),e.jsxs(Q,{children:[e.jsx(fe,{asChild:!0,children:e.jsxs(b,{variant:"destructive",className:"gap-2",disabled:v,children:[e.jsx(Ne,{className:"h-4 w-4"}),t("delete_user")]})}),e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsx(W,{children:t("delete_user_title")}),e.jsx(q,{children:t("delete_user_warning")})]}),e.jsxs(Y,{children:[e.jsx(Z,{children:t("cancel")}),e.jsxs(ee,{onClick:()=>g(i.id),disabled:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[v?e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Ne,{className:"mr-2 h-4 w-4"}),t("confirm_delete")]})]})]})]})]})]})]})]}),e.jsxs(L,{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",id:"profile-updates-section",children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(G,{children:t("profile_update_requests")||"Profile Update Requests"}),e.jsx(H,{children:t("profile_update_requests_description")||"Review and manage profile update requests from this client"})]}),!f&&c&&c.length>0&&e.jsxs(C,{variant:"outline",className:"ml-2",children:[c.filter(s=>s.status==="pending").length," pending"]})]})}),e.jsx($,{className:"p-6",children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-24 animate-pulse bg-accent/10 rounded-lg"}),e.jsx("div",{className:"h-24 animate-pulse bg-accent/10 rounded-lg"})]}):k?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ue,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),e.jsx("p",{className:"text-destructive",children:"Error loading profile update requests"}),e.jsxs(b,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>A(),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):c&&c.length>0?e.jsx("div",{className:"space-y-4",children:e.jsxs(pe,{defaultValue:"pending",className:"w-full",children:[e.jsxs(xe,{className:"grid w-full grid-cols-3 lg:w-[400px] bg-background/95",children:[e.jsxs(E,{value:"pending",className:"data-[state=active]:bg-primary/10",children:["Pending",c.filter(s=>s.status==="pending").length>0&&e.jsx(C,{variant:"outline",className:"ml-2",children:c.filter(s=>s.status==="pending").length})]}),e.jsx(E,{value:"approved",className:"data-[state=active]:bg-primary/10",children:"Approved"}),e.jsx(E,{value:"rejected",className:"data-[state=active]:bg-primary/10",children:"Rejected"})]}),e.jsx(S,{value:"pending",className:"space-y-4 mt-4",children:c.filter(s=>s.status==="pending").length===0?e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(Rs,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground/60"}),e.jsx("p",{children:"No pending profile update requests"})]}):c.filter(s=>s.status==="pending").map(s=>e.jsx(V,{request:s,client:i,onApprove:(m,y)=>We(m,y),onReject:(m,y)=>qe(m,y),isPending:s.status==="pending"},s.id))}),e.jsx(S,{value:"approved",className:"space-y-4 mt-4",children:c.filter(s=>s.status==="approved").length===0?e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(us,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground/60"}),e.jsx("p",{children:"No approved profile update requests"})]}):c.filter(s=>s.status==="approved").map(s=>e.jsx(V,{request:s,client:i,isPending:s.status==="pending"},s.id))}),e.jsx(S,{value:"rejected",className:"space-y-4 mt-4",children:c.filter(s=>s.status==="rejected").length===0?e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(ps,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground/60"}),e.jsx("p",{children:"No rejected profile update requests"})]}):c.filter(s=>s.status==="rejected").map(s=>e.jsx(V,{request:s,client:i,isPending:s.status==="pending"},s.id))})]})}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(be,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground/60"}),e.jsx("p",{children:"No profile update requests found"})]})})]}),e.jsxs(L,{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[e.jsxs(M,{children:[e.jsx(G,{children:t("recent_transactions")}),e.jsx(H,{children:t("recent_transactions_description")})]}),e.jsx($,{className:"p-6",children:e.jsxs(pe,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(xe,{className:"grid w-full grid-cols-3 lg:w-[400px] bg-background/95",children:[e.jsx(E,{value:"all",className:"data-[state=active]:bg-primary/10",children:t("all")}),e.jsx(E,{value:"deposits",className:"data-[state=active]:bg-primary/10",children:t("deposits")}),e.jsx(E,{value:"withdrawals",className:"data-[state=active]:bg-primary/10",children:t("withdrawals")})]}),e.jsx(S,{value:"all",className:"space-y-4",children:i.transactions&&i.transactions.length>0?e.jsx("div",{className:"space-y-4",children:i.transactions.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border/40 hover:bg-accent/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-background border border-border/40 flex items-center justify-center",children:Qe(s.type)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium capitalize",children:s.type.toLowerCase()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F(s.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:P(s.amount,s.currency)}),e.jsx(C,{variant:O(s.status),className:"mt-1 capitalize",children:s.status.toLowerCase()}),s.txHash&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(z,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:s.txHash})]})]})]},s.id))}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:t("no_transactions")})}),e.jsx(S,{value:"deposits",className:"space-y-4",children:i.transactions&&i.transactions.filter(s=>s.type.toLowerCase()==="deposit").map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border/40 hover:bg-accent/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-background border border-border/40 flex items-center justify-center",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium capitalize",children:s.type.toLowerCase()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F(s.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:P(s.amount,s.currency)}),e.jsx(C,{variant:O(s.status),className:"mt-1 capitalize",children:s.status.toLowerCase()}),s.txHash&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(z,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:s.txHash})]})]})]},s.id))}),e.jsx(S,{value:"withdrawals",className:"space-y-4",children:i.transactions&&i.transactions.filter(s=>s.type.toLowerCase()==="withdrawal").map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border/40 hover:bg-accent/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-background border border-border/40 flex items-center justify-center",children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium capitalize",children:s.type.toLowerCase()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F(s.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:P(s.amount,s.currency)}),e.jsx(C,{variant:O(s.status),className:"mt-1 capitalize",children:s.status.toLowerCase()}),s.txHash&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(z,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:s.txHash})]})]})]},s.id))})]})})]})]}):null]})}],We=(s,m)=>{oe.mutate({requestId:s,action:"approve",selectedFields:m})},qe=(s,m)=>{oe.mutate({requestId:s,action:"reject",comment:m})};return e.jsx(gs,{panels:Xe})}function V({request:r,client:n,onApprove:o,onReject:p,isPending:t}){const a=ae(),[h,l]=j.useState(""),[g,x]=j.useState(!1),v=new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});n!=null&&n.fullName,n!=null&&n.email,n!=null&&n.phoneNumber,n!=null&&n.address,n!=null&&n.countryOfResidence,n!=null&&n.gender;const[i,N]=j.useState({fullName:r.fullName!==void 0&&r.fullName!==null,email:r.email!==void 0&&r.email!==null,phoneNumber:r.phoneNumber!==void 0&&r.phoneNumber!==null,address:r.address!==void 0&&r.address!==null,countryOfResidence:r.countryOfResidence!==void 0&&r.countryOfResidence!==null,gender:r.gender!==void 0&&r.gender!==null}),d=Object.values(i).filter(Boolean).length,u=Object.values(i).filter(Boolean).length,c=k=>{t&&N(A=>({...A,[k]:!A[k]}))},f=k=>i[k];return e.jsxs("div",{className:"border border-border/40 rounded-lg p-4 space-y-4 hover:bg-accent/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a("requested_on")," ",v]}),r.reviewedAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-muted-foreground mx-2",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a("reviewed_on")," ",new Date(r.reviewedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:r.status==="pending"?"default":r.status==="approved"?"success":"destructive",children:r.status}),d>0&&e.jsxs(C,{variant:"outline",className:"bg-background/50",children:[d," ",a(d===1?"field":"fields")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 px-4 py-2 bg-accent/5 rounded-md",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:a("requested_changes")}),e.jsxs("div",{className:"space-y-3",children:[r.fullName!==void 0&&r.fullName!==null&&e.jsxs("div",{className:"flex flex-col gap-1 pb-2 border-b border-border/20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-sm font-medium",children:a("full_name")}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{id:`approve-fullName-${r.id}`,checked:f("fullName"),onCheckedChange:()=>c("fullName")}),e.jsx(w,{htmlFor:`approve-fullName-${r.id}`,className:"text-xs",children:f("fullName")?a("approve"):a("excluded")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("current_value"),":"]}),e.jsx("p",{className:"text-sm",children:(n==null?void 0:n.fullName)||a("not_provided")})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("requested_value"),":"]}),e.jsx("p",{className:"text-sm font-medium",children:r.fullName||a("not_provided")})]})]})]}),r.email!==void 0&&r.email!==null&&e.jsxs("div",{className:"flex flex-col gap-1 pb-2 border-b border-border/20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-sm font-medium",children:a("email")}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{id:`approve-email-${r.id}`,checked:f("email"),onCheckedChange:()=>c("email")}),e.jsx(w,{htmlFor:`approve-email-${r.id}`,className:"text-xs",children:f("email")?a("approve"):a("excluded")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("current_value"),":"]}),e.jsx("p",{className:"text-sm",children:(n==null?void 0:n.email)||a("not_provided")})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("requested_value"),":"]}),e.jsx("p",{className:"text-sm font-medium",children:r.email||a("not_provided")})]})]})]}),r.phoneNumber!==void 0&&r.phoneNumber!==null&&e.jsxs("div",{className:"flex flex-col gap-1 pb-2 border-b border-border/20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-sm font-medium",children:a("phone")}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{id:`approve-phoneNumber-${r.id}`,checked:f("phoneNumber"),onCheckedChange:()=>c("phoneNumber")}),e.jsx(w,{htmlFor:`approve-phoneNumber-${r.id}`,className:"text-xs",children:f("phoneNumber")?a("approve"):a("excluded")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("current_value"),":"]}),e.jsx("p",{className:"text-sm",children:(n==null?void 0:n.phoneNumber)||a("not_provided")})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("requested_value"),":"]}),e.jsx("p",{className:"text-sm font-medium",children:r.phoneNumber||a("not_provided")})]})]})]}),r.address!==void 0&&r.address!==null&&e.jsxs("div",{className:"flex flex-col gap-1 pb-2 border-b border-border/20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-sm font-medium",children:a("address")}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{id:`approve-address-${r.id}`,checked:f("address"),onCheckedChange:()=>c("address")}),e.jsx(w,{htmlFor:`approve-address-${r.id}`,className:"text-xs",children:f("address")?a("approve"):a("excluded")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("current_value"),":"]}),e.jsx("p",{className:"text-sm",children:(n==null?void 0:n.address)||a("not_provided")})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("requested_value"),":"]}),e.jsx("p",{className:"text-sm font-medium",children:r.address||a("not_provided")})]})]})]}),r.countryOfResidence!==void 0&&r.countryOfResidence!==null&&e.jsxs("div",{className:"flex flex-col gap-1 pb-2 border-b border-border/20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-sm font-medium",children:a("country")}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{id:`approve-countryOfResidence-${r.id}`,checked:f("countryOfResidence"),onCheckedChange:()=>c("countryOfResidence")}),e.jsx(w,{htmlFor:`approve-countryOfResidence-${r.id}`,className:"text-xs",children:f("countryOfResidence")?a("approve"):a("excluded")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("current_value"),":"]}),e.jsx("p",{className:"text-sm",children:(n==null?void 0:n.countryOfResidence)||a("not_provided")})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("requested_value"),":"]}),e.jsx("p",{className:"text-sm font-medium",children:r.countryOfResidence||a("not_provided")})]})]})]}),r.gender!==void 0&&r.gender!==null&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-sm font-medium",children:a("gender")}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{id:`approve-gender-${r.id}`,checked:f("gender"),onCheckedChange:()=>c("gender")}),e.jsx(w,{htmlFor:`approve-gender-${r.id}`,className:"text-xs",children:f("gender")?a("approve"):a("excluded")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("current_value"),":"]}),e.jsx("p",{className:"text-sm",children:(n==null?void 0:n.gender)||a("not_provided")})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("requested_value"),":"]}),e.jsx("p",{className:"text-sm font-medium",children:r.gender||a("not_provided")})]})]})]}),d===0&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:a("no_changes_requested")})]})]}),t?e.jsxs("div",{className:"flex flex-col items-end justify-between h-full",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-auto",children:u>0?e.jsxs("p",{children:[u," ",a(u===1?"field":"fields")," ",a("selected_for_approval")]}):e.jsx("p",{className:"text-amber-500",children:a("no_fields_selected")})}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(b,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>x(!0),children:a("reject")}),e.jsx(b,{variant:"outline",size:"sm",className:"text-success hover:bg-success/10",disabled:u===0,onClick:()=>o&&o(r.id,i),children:a("approve_selected")})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium mb-1",children:a("admin_review")}),r.adminComment?e.jsx("p",{className:"text-sm",children:r.adminComment}):e.jsx("p",{className:"text-sm text-muted-foreground",children:a("no_comments_provided")})]})]}),e.jsx(Q,{open:g,onOpenChange:x,children:e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsx(W,{children:"Reject Profile Update"}),e.jsx(q,{children:"Please provide a reason for rejecting this profile update. This will be visible to the user."})]}),e.jsxs("div",{className:"py-2",children:[e.jsx(w,{htmlFor:"reject-comment",children:"Comment"}),e.jsx(fs,{id:"reject-comment",placeholder:"Reason for rejection",value:h,onChange:k=>l(k.target.value),className:"mt-2"})]}),e.jsxs(Y,{children:[e.jsx(Z,{children:"Cancel"}),e.jsx(ee,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>{p&&(p(r.id,h),l(""),x(!1))},children:"Confirm Rejection"})]})]})})]})}export{it as default};
